



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Documentation for ERMrest web-service codebase in the DERIVA framework.">
      
      
        <link rel="canonical" href="https://informatics-isi-edu.github.io/ermrest/user-doc/ermrest-client-table/">
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../images/favicon.ico">
      <meta name="generator" content="mkdocs-0.17.4, mkdocs-material-2.9.2">
    
    
      
        <title>System Table `ermrest_client` - ERMrest Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.ba0fd1a6.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
      <link rel="stylesheet" href="../../css/extra.css">
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#ermrest-client-table" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://informatics-isi-edu.github.io/ermrest/" title="ERMrest Documentation" class="md-header-nav__button md-logo">
          
            <img src="../../images/logo.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                ERMrest Documentation
              </span>
              <span class="md-header-nav__topic">
                System Table `ermrest_client`
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <span class="md-nav__button md-logo">
      
        <img src="../../images/logo.png" width="48" height="48">
      
    </span>
    ERMrest Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      User Docs
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        User Docs
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../install-redhat/" title="Installing on Red Hat-derived Linux" class="md-nav__link">
      Installing on Red Hat-derived Linux
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../annotation/" title="Model Annotation" class="md-nav__link">
      Model Annotation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tuning/" title="Performance Tuning" class="md-nav__link">
      Performance Tuning
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ermrest-registry-purge/" title="ermrest-registry-purge command" class="md-nav__link">
      ermrest-registry-purge command
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        System Table `ermrest_client`
      </label>
    
    <a href="./" title="System Table `ermrest_client`" class="md-nav__link md-nav__link--active">
      System Table `ermrest_client`
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#extensibility-and-localization" title="Extensibility and Localization" class="md-nav__link">
    Extensibility and Localization
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conservative-default-policy" title="Conservative default policy" class="md-nav__link">
    Conservative default policy
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#interface-guarantees" title="Interface Guarantees" class="md-nav__link">
    Interface Guarantees
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../history-track/" title="History Tracking for DBAs and Programmers" class="md-nav__link">
      History Tracking for DBAs and Programmers
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      ERMrest API and Service Semantics
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        ERMrest API and Service Semantics
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api-doc/" title="Guide to the ERMrest API" class="md-nav__link">
      Guide to the ERMrest API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api-doc/rest-catalog/" title="ERMrest Catalog Operations" class="md-nav__link">
      ERMrest Catalog Operations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-3" type="checkbox" id="nav-3-3">
    
    <label class="md-nav__link" for="nav-3-3">
      ERMrest Model Guide
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-3-3">
        ERMrest Model Guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api-doc/model/naming/" title="ERMrest Model Resource Naming" class="md-nav__link">
      ERMrest Model Resource Naming
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api-doc/model/rest/" title="ERMrest Model Operations" class="md-nav__link">
      ERMrest Model Operations
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-4" type="checkbox" id="nav-3-4">
    
    <label class="md-nav__link" for="nav-3-4">
      ERMrest Access Control
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-3-4">
        ERMrest Access Control
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api-doc/acl/concepts/" title="Access Concepts" class="md-nav__link">
      Access Concepts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api-doc/acl/static/" title="Static Model-Based Policies" class="md-nav__link">
      Static Model-Based Policies
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api-doc/acl/dynamic/" title="Dynamic Data-Dependent Policies" class="md-nav__link">
      Dynamic Data-Dependent Policies
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-5" type="checkbox" id="nav-3-5">
    
    <label class="md-nav__link" for="nav-3-5">
      Client-Specific Rights
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="6">
      <label class="md-nav__title" for="nav-3-5">
        Client-Specific Rights
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api-doc/acl/rights/" title="Rights Summaries" class="md-nav__link">
      Rights Summaries
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-5-2" type="checkbox" id="nav-3-5-2">
    
    <label class="md-nav__link" for="nav-3-5-2">
      ERMrest Data Resources
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="8">
      <label class="md-nav__title" for="nav-3-5-2">
        ERMrest Data Resources
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api-doc/data/naming/" title="ERMrest Data Resources" class="md-nav__link">
      ERMrest Data Resources
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api-doc/data/rest/" title="ERMrest Data Operations" class="md-nav__link">
      ERMrest Data Operations
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-5-3" type="checkbox" id="nav-3-5-3">
    
    <label class="md-nav__link" for="nav-3-5-3">
      ERMrest History Management
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="9">
      <label class="md-nav__title" for="nav-3-5-3">
        ERMrest History Management
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api-doc/history/naming/" title="ERMrest History Management Resources" class="md-nav__link">
      ERMrest History Management Resources
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api-doc/history/rest/" title="ERMrest History Management Operations" class="md-nav__link">
      ERMrest History Management Operations
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#extensibility-and-localization" title="Extensibility and Localization" class="md-nav__link">
    Extensibility and Localization
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conservative-default-policy" title="Conservative default policy" class="md-nav__link">
    Conservative default policy
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#interface-guarantees" title="Interface Guarantees" class="md-nav__link">
    Interface Guarantees
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="ermrest-client-table">ERMrest client table<a class="headerlink" href="#ermrest-client-table" title="Permanent link">&para;</a></h1>
<p>The <code>ermrest_client</code> table in the <code>public</code> schema is created
automatically in newly created catalogs and is also added to existing
catalogs when <code>ermrest-deploy</code> upgrades a system.</p>
<p>The rows of this table are automatically maintained by ERMrest,
recording basic client information as each new authenticated client is
encountered. No attempt is made to purge records.</p>
<p>At time of writing, this contains these columns:</p>
<ul>
<li><code>id</code>: The <code>text</code> unique identifier of the client (possibly a URI).</li>
<li><code>display_name</code>: A more human-readable <code>text</code> representation of the
  client identity (possibly a domain-qualified username which looks
  similar to an email address).</li>
<li><code>full_name</code>: The human-readable <code>text</code> name of the client.</li>
<li><code>email</code>: A <code>text</code> email address to contact the client.</li>
<li><code>client_obj</code>: A <code>jsonb</code> object containing client metadata.</li>
</ul>
<p>The <code>id</code> field is the primary key and cannot be NULL.  Each of the
other fields MAY be NULL, depending on what information is available
from the configured webauthn2 identity provider.</p>
<p>The set of columns is a pragmatic choice, intended to reflect stable
client information which may be helpful when interpreting provenance
metadata and which is usually present in deployed systems. For
performance reasons, we do not wish to have high-resolution temporal
information such as access or expiration times, as these would cause
too many database updates in what are otherwise read-only ERMrest
requests.</p>
<h2 id="extensibility-and-localization">Extensibility and Localization<a class="headerlink" href="#extensibility-and-localization" title="Permanent link">&para;</a></h2>
<p>The DBA is allowed to add additional human-managed columns to the
<code>ermrest_client</code> table. These columns MUST have a properly configured
default value and/or allow NULL values so that ERMrest can insert
newly discovered clients while only configuring the subset of columns
which it understands.  Failure to do so may render the service
inoperative until this problem is rectified.</p>
<p>The DBA is also allowed to customize access control policies for
this table. It is impossible to hide the table from catalog owners,
but less privileged users need not be aware of it.</p>
<h2 id="conservative-default-policy">Conservative default policy<a class="headerlink" href="#conservative-default-policy" title="Permanent link">&para;</a></h2>
<p>When the table is introduced into a catalog, it is assigned a
default table-level policy:</p>
<pre><code>{
  "insert": [],
  "update": [],
  "delete": [],
  "select": [],
  "enumerate": []
}
</code></pre>
<p>This effectively hides the table from clients who are not owners of
the whole catalog or the <code>public</code> schema.  A catalog administrator MAY
subsequently modify these policies to make content visible to clients
where appropriate.</p>
<h2 id="interface-guarantees">Interface Guarantees<a class="headerlink" href="#interface-guarantees" title="Permanent link">&para;</a></h2>
<p>The set of columns included in the table are based on the currently
known information from webauthn.  ERMrest requires the columns to be
present for correct function.</p>
<p>A future version of ERMrest MAY:</p>
<ol>
<li>Change the set of properties in the <code>client_obj</code> field</li>
<li>Extend the list of client metadata columns</li>
<li>Include additional columns when creating the table</li>
<li>Add columns to existing table instances in ermrest-deploy</li>
<li>Shorten the list of client metadata columns</li>
<li>Omit obsolete columns when creating the table</li>
<li>Ignore obsolete columns when operating on existing tables</li>
</ol>
<p>The DBA is also allowed to mutate the <code>ermrest_client</code> table contents
to import knowledge about clients who have not yet been discovered by
the ERMrest service logic. However, when ERMrest encounters a client
corresponding to such an entry, it will automatically mutate the
columns it understands to reflect all the latest client metadata
obtained from the webauthn identity providers.</p>
<p>Therefore, it is not recommended that users be given access to modify
those fields, as they will become confused or frustrated when values
revert to the webauthn-established values.</p>
<p>Likewise, the DBA is allowed to purge stale entries from the
<code>ermrest_client</code> table, but catalog access by a purged client will
automatically reinsert their information.  If a DBA wishes to hide
certain clients' information from the userbase, a dynamic ACL binding
should be defined to control access to individual rows while allowing
corresponding rows to be present for each active client.</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../ermrest-registry-purge/" title="ermrest-registry-purge command" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                ermrest-registry-purge command
              </span>
            </div>
          </a>
        
        
          <a href="../history-track/" title="History Tracking for DBAs and Programmers" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                History Tracking for DBAs and Programmers
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2018 <a href="http://github.com/informatics-isi-edu/ermrest">ERMrest Project</a>.
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      <div class="md-footer-logo">
        <img src="/images/deriva-h50-simple.png">
      </div>
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.a59e2a89.js"></script>
      
      <script>app.initialize({version:"0.17.4",url:{base:"../.."}})</script>
      
    
    
      
    
  </body>
</html>